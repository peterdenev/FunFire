(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){module.exports=t()}else{e.FunFire=t()}})(this,function(){var e="FunFire",t="_listeners";var n=function(e,t){if(document.createEventObject){var n=document.createEventObject();return e.fireEvent("on"+t,n)}else{var n=document.createEvent("HTMLEvents");n.initEvent(event,true,true);return!e.dispatchEvent(n)}};var r=function(n,r,i){if(!i.hasOwnProperty(e))i[e]={_listeners:{}};if(!i[e][t].hasOwnProperty[n])i[e][t][n]=[];i[e][t][n].push(r)};var i=function(n,r){if(r.hasOwnProperty(e)&&r[e].hasOwnProperty(t)&&r[e][t].hasOwnProperty(n)){return r[e][t][n]}return[]};var s=function(n,r){if(n.hasOwnProperty(e)&&n[e].hasOwnProperty(t)){typeof r=="undefined"?n[e][t]={}:n[e][t][r]={}}};var o={on:function(n,s,u){if(arguments.length<3)u=document;var a=function(t){var r=s(t,t[e].data,t[e].callback);if(r===false){var a=i(n,u);o.off(n,u);for(var f in a){o.on(n,a[f],u)}}return r};if("addEventListener"in u){u.addEventListener(n,a,false)}else{document.attachEvent("on"+n,a)}r(n,a,u)},emit:function(n,r,i,s){if(arguments.length<2)r=document;var o={data:i,callback:s};if(document.createEventObject){var u=document.createEventObject();u[e]=o;return r.fireEvent("on"+n,u)}else{var u=document.createEvent("HTMLEvents");u[e]=o;u.initEvent(n,true,true);return!r.dispatchEvent(u)}},once:function(t,n,r){if(arguments.length<3)r=document;o.on(t,function(e,t,r){e.target.removeEventListener(e.type,arguments.callee.caller);return n(e,t,r)},r)},off:function(t,n){if(arguments.length<2)n=document;var r=i(t,n);for(var o in r){n.removeEventListener(t,r[o])}s(n,t)}};return o})