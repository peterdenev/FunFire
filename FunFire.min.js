!function(n,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():n.FunFire=e()}(this,function(){var n="FunFire",e="_listeners",t=function(t,r,o){o.hasOwnProperty(n)||(o[n]={}),o[n].hasOwnProperty(e)||(o[n][e]={}),o[n][e].hasOwnProperty[t]||(o[n][e][t]=[]),o[n][e][t].push(r)},r=function(t,r){return r.hasOwnProperty(n)&&r[n].hasOwnProperty(e)&&r[n][e].hasOwnProperty(t)?r[n][e][t]:[]},o=function(t,r,o){if(t.hasOwnProperty(n)&&t[n].hasOwnProperty(e))if("undefined"==typeof r)t[n][e]={};else if("undefined"==typeof o){for(var a in t[n][e][r])if(t[n][e][r][a]==o){delete t[n][e][r][a];break}}else t[n][e][r]={}},a={on:function(e,o,i){arguments.length<3&&(i=document);var u=function(t){var u=t.hasOwnProperty(n),f=o(t,u?t[n].data:null,u?t[n].callback:null);if(f===!1){var c=r(e,i);a.off(e,i);for(var s in c)a.on(e,c[s],i)}return f};return"addEventListener"in i?i.addEventListener(e,u,!1):document.attachEvent("on"+e,u),t(e,u,i),u},emit:function(e,t,r,o){arguments.length<2&&(t=document);var a={data:r,callback:o};if(document.createEventObject){var i=document.createEventObject();return i[n]=a,t.fireEvent("on"+e,i)}var i=document.createEvent("HTMLEvents");return i[n]=a,i.initEvent(e,!0,!0),!t.dispatchEvent(i)},once:function(n,e,t){arguments.length<3&&(t=document),a.on(n,function(n,t,r){return n.target.removeEventListener(n.type,arguments.callee.caller),e(n,t,r)},t)},off:function(n,e,t){arguments.length<2&&(e=document);var a=r(n,e);for(var i in a)("undefined"==typeof t||t==a[i])&&e.removeEventListener(n,a[i]);o(e,n,t)},standart:{on:function(n,e){var t=function(n,t,r){return e.apply(e,t)};a.on(n,t,window)},emit:function(n){var e=Array.prototype.slice.call(arguments);return n=e.shift(),a.emit.apply(this,[n,window,e])},once:function(n,e){var t=function(n,t,r){return e.apply(e,t)};a.once(n,t,window)},off:function(n,e){a.off(n,window,e)}}};return a});